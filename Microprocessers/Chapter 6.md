### 호출을 위한 3가지
1. 함수를 호출하면 해당 함수 부분으로 이동해서 명령어 실행 후 다시 원래 위치로 복귀해 계속 실행
2. 함수 호출시 인수 전달 방법 필요
3. 함수의 결과값 받아오는 방법 필요

### 함수 호출을 위한 명령어
LINK
BR nzp, addr

### 함수 복귀를 위한 명령어
RET

### 함수 인수 전달 방법
: 함수 호출 전에 해당 인수를 스택에 먼저 push 후 함수 실행 시 해당 부분을 프레임 포인터로 가리킨다.

### 함수 지역변수를 위한 메모리 할당 및 접근 방법
- 메모리 할당: 스택포인터를 필요한 만큼 줄여서 스택 상단에 지역 변수를 위한 메모리 영역을 할당한다.
- 접근 방법: 사전에 할당해 놓은 스택 상단에 프레임 포인터를 활용하여 접근한다.

### 함수 반환 값 전달 방법
: R0 레지스터를 활용하여 반환값을 전달한다.

### 스택 포인터의 용도
: 스택의 동작을 위해 스택의 상단 주소를 가리킨다.

### 스택 동작 관련 TOY 프로세서 명령어
- PUSH 동작
SUB R5, R5, 1 (스택 포인터 -1)
STR Rs, R5, 0 (스택 상단 Rs값 저장)
- POP 동작
LDR Rd, R5, 0 (스택 상단값 Rd에 저장)
ADD R5, R5, 1 (스택 포인터 +1)

### 링크 레지스터의 저장과 복구
: 다른 함수 호출 등과 같은 과정에서 링크 레지스터에 저장된 값이 변경될 수 있기 때문에 스택에 저장해두고 함수에서 복귀시 스택에서 다시 읽어오는 과정을 거친다.

### 스택을 사용하는 이유
: 레지스터의 개수는 한정되어있기 때문에 전달할 인수의 개수에 제한이 생기나, 스택을 사용하면 개수에 대한 제한이 없어지기 떄문이다.

### 프레임 포인터 활용 예
: 프레임 포인터보다 높은 주소는 전달받은 인수들의 영역, 낮은 주소는 함수에서 사용하는 지역 변수들을 위한 영역

### 스택 프레임 조정
- 함수 시작
SUB R5, R5, 2 (LR, FP값을 새로운 값으로 변경해주기 위해 스택에 이전값 저장해 두려고 스택 영역 할당)
STR R6, R5, 1 (LR값 스택에 PUSH)
STR R4, R5, 0 (FP값 스택에 PUSH)
COPY R4, R5 (SP값 FP에 복사)
- 함수 종료
COPY R5, R4 (SP값 복구)
LDR R6, R5, 1 (LR값 복구)
LDR R4, R5, 0 (FP값 복구)
ADD R5, R5, 2 (LR, FP값 복구위해 할당했던 스택 영역 복구(POP))
RET

### 전역 변수 메모리 할당
: 전역변수의 경우 지시어를 통해 고정적으로 할당한다.
