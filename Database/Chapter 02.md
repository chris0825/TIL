# 스키마, 인스턴스, 데이터베이스 상태
### 데이터베이스 스키마(또는 메타 데이터)
- 데이터베이스 자체에 대한 기술
- 데이터베이스 설계 과정에서 명시하며 자주 변경되지X
- 메타 데이터 역할(자기기술성)
### 스키마 다이어그램
- 데이터베이스 스키마를 도식화 한 것
- 레코드 타입의 이름, 데이터 항목의 이름, 일부 제약 조건 유형들과 같은 스키마 **일부 관점**만을 나타냄
### 데이터베이스 상태 (OR 스냅샷)
- 어커런스(Occurrence)나 인스턴스(Instance)들의 집합이라고도 함
- 어떤 특정 시점에 데이터베이스에 들어 있는 데이터들의 집합
- 데이터베이스에 갱신 연산이 수행될 때마다 새로운 다른 데이터베이스 상태를 가짐
- DBMS는 데이터베이스 상태가 스키마에 명시된 구조와 제약조건을 만족하는 유효한 상태임을 보장하는 책임을 일부 가짐

**상태라고 하는 이유?**<br>
: 현재 다르고 미래 다르기 때문(변화)

### 내포(Intension)와 외연(Extension)
|내포|외연|
|:-:|:-:|
|일반적 스키마|데이터베이스 상태|

### 스키마 진화(Schema Evolution)
- 새로운 필드를 추가하거나, 필요 없는 필드를 삭제하는 과정
- 대부분 DBMS는 시스템 운영 중에 스키마 진화가 허용되도록 지원 (ALTER)

# 데이터베이스 특징
1. 프로그램과 데이터 분리
2. 다중 뷰의 지원
3. 카탈로그(메타 데이터) 저장/관리

**=> 3단계-스키마 아키텍처**

# 3단계-스키마 아키텍처
### 목적
- 사용자의 응용(Application)과 물리적 데이터베이스의 분리
### 내부 단계
- 내부 스키마를 가지며, 내부 스키마는 물리적 데이터 모델을 사용
- 데이터 저장 구조의 세부 사항과 데이터베이스에 대한 접근 경로들을 기술
### 개념 단계
- 개념 스키마를 가지며, 이는 전체 사용자를 위한 데이터베이스 구조를 기술
- 내부 단계의 물리적 저장 구조 등 세부 사항은 숨김
- 엔티티, 데이터 타입, 관계, 사용자 연산, 제약 조건들을 나타내는데 중점
### 외부 단계 또는 뷰 단계
- 외부 스키마나 사용자 뷰들을 포함
- 특정 사용자 그룹이 관심을 갖는 부분을 나타내고 나머지는 은폐
### 사상(Mapping)
- 외부 스키마를 참조하여 사용자가 데이터를 요구하면 이를 데이터베이스 내에서 개념 스키마에 대한 요구로 변환
- 개념 스키마는 다시 내부 스키마에 대한 요구로 변환되어 저장된 데이터베이스에 접근하여, 사용자의 요구에 대한 결과를 얻음
- 역방향도 유사한 과정을 거쳐서, 사용자의 뷰와 일치하도록 재구성하는 과정을 "사상"이라고 함
### 데이터 독립성(Data independence)
|논리적 데이터 독립성<br>Logical data independence|물리적 데이터 독립성<br>Physical data independence|
|:-|:-|
|외부 스키마나 응용 프로그램을 변경하지 않으면서도 개념 스키마를 변경할 수 있는 능력(성질)<br>주로 뷰(외부 스키마)와 테이블(개념 스키마) 사이의 독립성을 의미<br>테이블 구조/내용 변경 시 뷰는 영향을 받지 않는 능력|개념 스키마를 변경하지 않으면서 내부 스키마를 변경할 수 있는 능력(성질)<br>물리적 구조인 내부 스키마(인덱스 구조, 접근 경로 관리 등)가 변경되더라도, 개념 스키마는 영향을 받지 않는 능력|

**외부-[논리적(사람)]-개념-[물리적(기계)]-내부**

### 3단계-스키마 장단점
|장점|물리/논리적 독립성 확보가 용이<br>사상(Mapping)만 변경<br>각 단계의 독립성 유지|
|:-|:-|
|단점|두 번의 사상에 따른 DBMS의 비효율성 초래<br>질의/프로그램 컴파일/실행에 많은 오버헤드 발생<br>실제로 완벽한 3단계-스키마 아키텍처를 구현한 DBMS는 거의X|

# DBMS 언어(DBMS Language)
### 데이터 정의어(DDL: Data Definition Language)
- 개념 스키마와 내부 스키마를 정의
### 데이터 조작어(DML: Data Manipulation Language)
- 데이터를 검색, 삽입, 삭제, 수정하기 위한 조작 언어
- 비절차적(Nonprocedural)인 언어, 사용이 편리한 언어를 사용
- DML 명령어는 범용 프로그램 언어에 삽입되어 사용 될 수 있음
### 기타 언어(DBMS에 따라 제공되는 언어)
|저장구조 정의어<br>SDL: Storage Definition Language|뷰 정의어<br> VDL: View Definition Language|
|:-:|:-:|
|내부 스키마를 정의|뷰를 명시하거나 개념 스키마 사이의 사상을 나타냄|

### DBMS 인터페이스 종류
1. 모바일 기기를 위한 앱
2. 브라우징을 위한 메뉴 기반 인터페이스
3. 폼 기반 인터페이스
4. 그래픽 사용자 인터페이스
5. 자연어 인터페이스
6. 키워드 기반 검색
7. 음성 입력 및 출력
8. 초보자를 위한 인터페이스
9. 데이터베이스 관리자(DBA)를 위한 인터페이스

# DBMS 구성 모듈
### DDL 컴파일러
- 데이터 정의어(DDL)를 해석하여, 이에 명시된 스키마 정의들을 처리
- 처리 결과인 스키마 정보(메타 데이터)를 DBMS 카탈로그 안에 저장
### 질의 컴파일러(Query compiler)
- 여러 질의 인터페이스에 의해 입력된 고수준 질의들을 컴파일(및 해석)
### 질의 최적화기(Query optimizer)
- 연산 재배치, 중복 연산의 제거 등을 통해 최적의 수행 코드 생성
- 데이터베이스에 대한 정보를 활용하여 최적화 수행
### 프리 컴파일러(Pre-compiler)
- 호스트 프로그래밍 언어로 작성된 응용 프로그램에서 데이터 조작어 명령들을 추출
- 추출된 데이터 조작어 명령: DML 컴파일러를 통해 컴파일
### DML 컴파일러 (= 질의 컴파일러와 역할 같음)
- 데이터 조작어 명령들을 데이터베이스 접근을 위한 목적 코드로 컴파일
### 저장 데이터 관리자(Stored data manager)
- 디스크에 저장되어 있는 DBMS의 정보에 대한 접근 제어
### 런타임 데이터베이스 처리기(Run-time database processor)
- 질의를 실제로 수행하고, 그 과정에서 실제 데이터베이스 접근을 처리

# 데이터베이스 시스템 유틸리티
: DBA가 데이터베이스 시스템을 관리하는 것을 도와주는 데이터베이스 유틸리티 제공
### 적재(Loading)
- 데이터 파일을 자동적으로 데이터베이스 파일의 형식으로 변환해서 저장(로딩)함
- 엑셀에서 CSV파일을 로딩하여 엑셀 파일로 변경하는 것을 예로 생각할 수 있음
### 백업(Backup)
- 전체 데이터베이스를 백업장치에 복사하여 데이터베이스의 백업 사본을 만듦
- 추후 발생할 수 있는 치명적 오류에 대비
### 파일 재조직(File reorganization)
- 성능 향상을 위해 데이터베이스 파일 구조를 다른 파일 구조로 재조직함
- 새로운 파일 구조로 전환, 인덱스/해싱 전환, 저장블록 재조직 등
- 윈도우에서 디스크 조각 모음도 비슷한 기능
### 성능 모니터링(Performance monitoring)
- 데이터베이스의 사용을 모니터링해서 사용통계를 데이터베이스 관리자에게 제공함
- 이 정보는 관리자가 데이터베이스 성능을 향상시키기 위해 파일들을 재조직할 것인지 결정하는데 사용됨
### 데이터 사전 시스템의 개념과 특징
- 스키마와 제약 조건들에 관한 카탈로그 정보와 설계 결정, 사용 표준, 응용 프로그램 기술, 사용자 정보 등과 같은 정보를 저장
- DBMS 카탈로그와 유사하나 더 다양한 정보를 가짐
- DBMS 소프트웨어보다는 주로 사용자가 접근
- 데이터 저장소(Data repository system)혹은 정보 저장소(Information repository)라 불리기도 함

# 도구, 응용, 통신 장비
### CASE 도구
- 데이터베이스 시스템을 설계하는 과정에서 사용됨
- 원래는 CASE는 SE 도구이나, 실질적으로 데이터베이스 설계에 주로 사용
### 응용 개발 환경
- ADE(Application Development Environment) 또는 IDE(Integrated Development Environment)란 명칭으로 알려짐
- 사용이 용이하고 Powerful한 개발환경 제공
### 통신 인터페이스 제공
- 통신 소프트웨어와 통신 장비를 사용하여, 데이터베이스 시스템 사이트로부터 멀리 떨어진 컴퓨터에서도 데이터베이스 접근을 가능하게 함
- ODBC(Open Database Connectivity), JDBC(Java Database Connectivity)등을 제공하여, 응용 프로그램에서 API를 사용하여 (원격으로)데이터베이스 시스템에 접근 가능

# 중앙집중식 DBMS 아키텍처
### 중앙집중식 DBMS 아키텍처의 구조와 특징
- 메인 프레임(Main frame)과 터미널(Terminal)을 사용함
- 터미널이 PC혹은 워크스테이션으로 대체
- 초기/과거의 DBMS 아키텍처는 중앙집중식 구조

⬆️과거 / ⬇️현재

# 클라이언트/서버 아키텍처
### 클라이언트/서버 아키텍처의 구조와 특징
- 특정 기능을 수행하는 특별한 (전담)서버를 지정
- 여러 서버가 메인 프레임의 기능을 분산해서 수행하며, 저마다 특화된 기능을 수행

|서버|질의와 트랜잭션 기능<br>질의 서버, 트랜잭션 서버, SQL 서버<br>API제공(서버 기능 제공)|
|:-|:-|
|클라이언트|User Interface Program과 Application Program 수행<br>API 호출(서버 기능 활용)|

### 객체지향 DBMS를 위한 2-층 C/S 아키텍처
- 대부분 처음부터 클라이언트/서버 아키텍처로 개발
- 특히, 일부 객체지향 DBMS는 서버 단계, 클라이언트 단계를 갖는 C/S 아키텍처를 취함

|서버|클라이언트|
|:-|:-|
|데이터 저장<br>동시성 제어와 회복<br>버퍼링과 캐싱 등|사용자 인터페이스<br>데이터 사전<br>버퍼 내의 데이터로부터 복잡한 객체를 구성|

### 웹 응용을 위한 3-층 C/S 아키텍처
- 클라이언트와 데이터베이스 서버 사이에 응용 서버 또는 웹 서버 추가
- 이 서버는 데이터베이스 서버에 저장된 비즈니스 규칙들을 저장함으로써 중간 역할을 수행
- 비즈니스 규칙은 일반적으로 데이터를 접근하는데 사용됨

# DBMS의 분류 기준
### 데이터 모델에 따른 분류
|과거<br>레거시(Legacy) 모델|최신<br> NoSQL 모델|
|:-|:-|
|네트워크 데이터 모델<br>계층 데이터 모델<br>XML 모델|문서 데이터 모델<br>그래프 데이터 모델<br>컬럼 기반 데이터 모델<br>Key-Value 데이터 모델|

### 사용자 수에 따른 분류
### 사이트 수에 따른 분류
|중앙집중식 DBMS|분산 DBMS|
|:-:|:-:|
|다수 사용자 지원하나, DBMS는 단일 시스템에 존재|여러 컴퓨터에 DBMS기능 분산 처리됨<br>동질 분산 DBMS<br>이질 분산 DBMS|

### 비용에 따른 분류
- 오픈 소스(무료) DBMS
- 라이선스 기반 DBMS
- 기타: 기능별 판매, 유지보수 비용 부과 등
### 접근 경로 유형에 따른 분류
- B-트리 기반 파일 구조
- 역파일(Iverterd file)구조
### 범용 또는 특수 목적용
### 데이터 모델에 따른 분류
- 개념적(고수준) 데이터 모델
  - 개체-관계(Entity-Relationship) 모델
- 논리적(표현/구현) 데이터 모델
  1. 관계 모델
    - 테이블들의 모임
    - 고급 질의어를 제공하고 제한된 형태의 사용자 뷰 지원
  2. 네트워크 모델
    - 데이터를 네트워크(그래프) 구조로 나타냄
    - 데이터를 레코드 타입으로 나타냄
    - 일대다(1:n)관계를 표현하는 화살표 이용(Owner-Member 관계)
  3. 계층 모델
    - 데이터를 계층적 트리구조로 나타냄
    - 데이터를 레코드 타입으로 나타냄
    - 일대다(1:n)관계를 표현하는 연결선 이용
  4. 객체지향
    - 객체, 객체의 속성, 연산으로 데이터베이스를 정의
    - 같은 구조와 행위를 갖는 객체들은 한 클래스에 속하고 클래스들은 계층 또는 비순환 그래프로 조직됨
    - 메소드라고 하는 미리 정의된 프로시저들이 클래스 연산을 나타냄
  5. 객체-관계 모델
    - 관계 모델에 객체지향 모델의 개념을 도입하여 확장
  6. 빅데이터 시스템의 NoSQL 모델
    1. 키-값 데이터 모델(Key-Value Data Model)
      - 고유한 키를 각 값과 연관시키고, 키가 주어지면 빠르게 해당 값에 접근
    2. 문서 데이터 모델(Document Data Model)
      - JSON을 기반으로 하여 복잡한 구조의 객체를 문서 형태 데이터로 저장
    3. 컬럼 기반 데이터 모델(Column-based Data Model)
       - 레코드의 컬럼들을 모아 저장하여 컬럼 순서 액세스를 빠르게 지원하며, 다수의 버전 허용
    4. 그래프 데이터 모델(Graph Data Model)
      - 데이터를 그래프 형태로 저장
