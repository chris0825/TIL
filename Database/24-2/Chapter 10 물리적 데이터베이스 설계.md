# 물리적 데이터베이스 설계
- 논리적 데이터 구조를 물리적 데이터 모델로 사상
- 예상 접근 빈도를 고려하기 위해 데이터베이스 질의와 트랜잭션 분석
- 데이터에 대한 효율적 접근을 위해 저장 구조와 접근 방법들을 다룸
- 특정 DBMS 특성을 고려하여 진행
- 효율적으로 질의를 지원하기 위해 인덱스 구조를 적절히 사용

# 보조기억 장치
- 데이터 검색시, 데이터를 포함하고 있는 블록을 읽어 주기억장치로 가져옴
- 데이터 변경시, 블록들을 디스크에 다시 기록
- 블록의 크기는 512Byte ~ 다양함(보통 4MB)
- 각 파일은 고정된 크기의 블록들로 나누어져 저장
- 대표적 보조기억장치: 디스크

# 자가디스크
- 주기억장치와 디스크간 이동 = 블록단위로 수행
- 블록은 1개 이상의 섹터로 구성
## 디스크 접근시간
  ```text
  = 탐색시간 (원하는 실린더 위에 디스크 헤드가 놓이는 시간)
  + 회전 지연시간 (원하는 블록이 헤드에 접근하는 시간)
  + 블록 전송시간 (블록을 주기억장치로 전송하는 시간(블록의 크기와 버스 시간에 따라 상이함))
  ```
### 읽기나 쓰기 과정에서 대부분의 시간을 차지하는 것
- 탐색시간
- 회전 지연시간

➡️ 이중버퍼링으로 시간 단축 가능
### 접근(탐색) 성능
- 순차접근 > 임의접근
## 물리적 디스크 블록 주소의 구성
- 표면번호
- 표면 내 트랙번호
- 트랙 내 블록번호

## DBMS와 자가디스크
- DBMS는 가능한한 연관된 레코드를 다음과 같은 순서대로 저장함
  1. 동일 블록
  2. 동일 트랙
  3. 동일 실린더
  4. 인접 실린더
- 브록들이 인접해 있을 필요는 없으나, 인접해 있으면 입출력 속도 향상(하드웨어 특성)
### 디스크상 파일 레코드 배치
- 연관 필드가 모여 파일 고정(가변)길이 레코드가 됨
- 필드 ⊆ 레코드 ⊆ 블록 ⊆ 파일
## DBMS의 성능
> 디스크 입출력 연산 횟수와 반비례<br>
> (∵ CPU 성능 >>> 디스크 속도)

# 버퍼
- 디스크 브록들을 저장하는데 사용되는 주기억장치 공간
- LRU(오래된 페이지 버림) 알고리즘으로 버퍼 관리
## 데이터 읽고 쓰기
- 데이터 읽기
  > DBMS -> 디스크 -> 버퍼 -> 응용프로그램
- 데이터 쓰기(갱신)
  > DBMS -> 버퍼 -> 디스크
### 디스크 입출력 횟수와 DBMS성능은 반비례
> 가능한 많은 블록 또는 자주 참조되는 블록을 주기억장치에 유지

# 레코드
- 데이터는 일반적으로 레코드 형태로 저장됨
- 각 레코드는 연관된 데이터 값이나 항목들로 구성
- 각 값은 하나 이상의 바이트로 구성되며 레코드 특정 필드에 해당
## 레코드 타입
### BLOB
> 이미지, 비디오 등 대규모 비구조적 개체는 별도 디스크 블럭들의 풀에 저장하고 레코드에는 그 포인터를 제공
### 고정길이 레코드
> 레코드 길이가 n바이트라고 가정,<br>
> 레코드 i에 접근하기 위해서는 n X (i - 1) + 1위치를 읽음
### 가변길이 레코드
- 레코드 구분 방식
  1. 분리 문자 사용
  2. 바이트 길이 기록
- 레코드 삭제 후 해당 위치보다 더 긴 길이의 레코드를 삽입하려면 다른 레코드들의 위치를 옮겨 공간을 추가 확보해야 함
## 레코드 블로킹
> 블록 크기가 레코드 크기보다 큰 경우 블록 안에 여러 레코드를 저장
- 블로킹 인수
  > 블록의 남은 크기가 레코드 크기보다 작아 사용되지 않는 공간<br>
  > ➡️ 해당 공간만큼 일부만 저장하고 나머지는 다른 블록에 저장

## 신장/비신장 레코드
### 신장 조직
> 레코드를 하나 이상의 블록에 걸쳐 저장하는 방식
> 레코드 하나의 크기가 한 블록의 크기보다 큰 경우 사용(∵ 블록단위 데이터 전송)
### 비신장 조직
> 레코드가 블록 경계를 넘지 않도록 저장
### 평균 레코드 크기가 큰 경우 각 블록 내 손실을 줄이기 위해 신장 조직 사용이 유리

# 파일 조직
- 기억장치상 레코드와 블록들을 저장하고 서로 연결시키는 방법
- 접근 방법은 파일에 적용할 수 있는 연산들의 그룹을 제공
- 자주 사용되는 연산들이 효율적으로 수행될수록 성능이 우수
## 유형
### 비순차(하프, Heap) 파일
### 순차 파일
### 인덱스된 순차 파일
### 직접 파일
