## 관계 모델
### 관계 모델의 구성
- 데이터베이스는 릴레이션(테이블)의 모임
- 릴레이션은 튜플(행, 레코드)들의 집합
- 튜플은 애트리뷰트(컬럼, 필드, 속성)들로 구성
### ER 모델과의 비교
- 테이블: 엔티티 타입
- 행: 엔티티 혹은 관계에 해당하는 사실(인스턴스)를 표현
- 열: 애트리뷰트들을 표시
### 용어
- 도메인
  > 애트리뷰트가 가질 수 있는 원자값들의 집합
  
  ex) 전화번호 집합, 데이터 타입, n~m사이 정수 등,,,
- 릴레이션 스키마
  > 
- 차수
  > 애트리뷰트의 수<br>
  > 유효한 릴레이션의 최소 차수는: 1
- 카디날리티
  > 최대 가능 튜플 수
  > 유효한 릴레이션의 카디날리티는: 0
### 제약 조건
> 모든 릴레이션 인스턴스들이 만족해야 하는 조건
- 본질적 모델 기반 제약 조건(함축적 제약 조건)
  > 관계 목록에서는 리스트를 속성 값으로 허용하지 않음
- 스키마 기반 제약 조건(명시적 제약 조건)
  > 주로 DDL(데이터 정의어)로 명시# 관계 모델
### 관계 모델의 구성
- 데이터베이스는 릴레이션(테이블)의 모임
- 릴레이션은 튜플(행, 레코드)들의 집합
- 튜플은 애트리뷰트(컬럼, 필드, 속성)들로 구성
### ER 모델과의 비교
- 테이블: 엔티티 타입
- 행: 엔티티 혹은 관계에 해당하는 사실(인스턴스)를 표현
- 열: 애트리뷰트들을 표시
### 용어
- 도메인
  > 애트리뷰트가 가질 수 있는 원자값들의 집합
  
  ex) 전화번호 집합, 데이터 타입, n~m사이 정수 등,,,
- 릴레이션 스키마
  > 
- 차수
  > 애트리뷰트의 수<br>
  > 유효한 릴레이션의 최소 차수는: 1
- 카디날리티
  > 최대 가능 튜플 수
  > 유효한 릴레이션의 카디날리티는: 0
### 제약 조건
> 모든 릴레이션 인스턴스들이 만족해야 하는 조건
- 본질적 모델 기반 제약 조건(함축적 제약 조건)
  > 관계 목록에서는 리스트를 속성 값으로 허용하지 않음
- 스키마 기반 제약 조건(명시적 제약 조건)
  > 주로 DDL(데이터 정의어)로 명시
  - **도메인 제약 조건(domain constraints)**
    > 속성 값은 도메인에 속하는 원자값이어야 함
  - **키 제약 조건(key constraints)**
    > 모든 튜플은 유일해야 함(키의 성질)
    - 슈퍼키 = 유일성
    - 키 = 최소 슈퍼키<br>: 슈퍼키를 구성하는 어느 한 애트리뷰트라도 빠지면 안됨<br>릴레이션 내 각 튜플을 유일하게 식별
    - 기본키(primary key)<br>후보키중 하나를 선택하여 밑줄로 표시<br>물리적 인덱스를 구성하여 접근 속도 향상
    - 후보키(candidate key)
  - **널에 대한 제약 조건(constraints on nulls)**
    > Not NULL인 경우 NULL값 허용X
  - **엔티티 무결성 제약 조건(entity integrity constraints)**
    > 기본키는 NULL이 될 수 없음
  - **참조 무결성 제약 조건(referential integrity constraints)**
    > 두 릴레이션 간 참조 관계
- 응용 기반 제약 조건(의미적 제약 조건, 비즈니스 규칙)
  > 데이터 모델의 스키마에서 직접 표현이 불가<br>
  > 응용 프로그램에 의해 표현되서 시행
## 릴레이션
### 특성
- 튜플간 순서는 없으나, 한 튜플 내에서 값의 순서는 중요
- 튜플 내에서 각 값들은 더 이상 나눌 수 없는 원자값들임
- 릴레이션에서 튜플은 중복되지 않음
## 릴레이션 갱신 연산
### 관계 모델 연산 종류
- 추출 => Read
- 갱신 => Write
### 릴레이션 갱신 연산
- 삽입: 새로운 튜플 삽입
- 삭제: 기존 튜플 삭제
- 수정: 기존 튜플의 값 변경
- 갱신 연산 시 스키마에 정의된 제약 조건을 위반하지 않아야 함
### 무결성 제약 위반시
- 위반의 원인이 되는 작업을 취소(RESTRICT or REJECT)
- 작업을 수행하되 사용자에게 위반 사실을 알림
- 위반이 수정되도록 추가 업데이트를 트리거(CASCADE, SET NULL)
- 사용자 지정 오류 수정 루틴 실행
### 삽입 연산시 가능한 위반
> 제약 조건 위반 시 삽입 명령 거부하거나<br>위반 사실을 사용자에게 알려 정정 요청
- 도메인 제약조건
  > 삽입되는 튜플에서 애트리뷰트 값이 도메인에 없는 경우
- 키 제약 조건
  > 삽입되는 튜플에서 기본키의 값이 다른 튜플에 이미 존재하는 경우
- 참조 무결성 제약
  > 외래키의 값이 참조되는 릴레이션의 기본키가 아닌 경우
- 엔티티 무결성 제약
  > 삽입되는 튜플에서 기본키 값이 NULL인 경우
### 삭제 연산시 가능한 위반
- 참조 무결성 제약 조건
  > 삭제하려는 튜플을 다른 튜플에서 참조하는 경우(이 경우, 다른 튜플에서 참조되지 않는 튜플만 삭제)
- 제약 조건 위반 시 취할 수 있는 세가지 옵션
  - RESTRICT
    > 삭제 거부
  - CASCADE
    > 참조하는 튜플들까지 모두 삭제(연쇄 삭제)
  - SET NULL
    > 튜플을 참조하는 외래키 값을 NULL로 바꾸거나 다른 값을 참조하도록 변경
### 수정 연산시 가능한 위반
- 수정 연산은 기본적으로 삭제&삽입 연산이므로 삽입과 삭제시 문제가 모두 발생
- 기본키나 외래키가 아닌 애트리뷰트의 값 변경은 큰 문제X(도메인 제약 조건의 위반 여부만 확인해주면 됨)

## 무결성 제약 조건
### 데이터 무결성(data integrity)
- 데이터의 정확성 또는 유효성을 의미
- 일관된 데이터베이스 상태를 정의하는 규칙들을 묵시적/명시적으로 정의
- 데이터베이스 갱신 시 DBMS가 자동적으로 일관성 조건을 검사(응용 프로그램은 검사 안해도 됨)
### 엔티티(개체) 무결정 제약 조건(Entity Integrity Constraint, 기본키 제약, key constraint)
- 기본키가 각 튜플들을 식별하는 데 이용되므로 어떤 기본키 값도 NULL값을 가질 수 없음
- 릴레이션 생성 시 기본키 명시
### 참조 무결성 제약 조건(Referential Integrity Constraint)
- (다른 제약조건과 달리) 두 릴레이션에 대한 제약 조건
- 참조되는 튜플은 해당 릴레이션 내에 존재해야 함
- 참조되는 릴레이션에 해당 값이 존재하지 않는 경우 NULL값을 가질 수 있음
- 같은 릴레이션 내에서도 참조가 가능
### 의미적 무결성 제약조건
> 릴레이션 모델에서 표현X, 응용 프로그램 내에서 체크<br>
> SQL에서 TRIGGER나 ASSERTION으로 사용될 수 있음
### 도메인(속성) 무결성 제약 조건
> 제약 대상: 애트리뷰트<br>
> NULL값 허용<br>
> 릴레이션 내 제약 조건의 개수 = 애트리뷰트 개수
### 키 무결성 제약 조건
- 엔티티 무결성 제약 조건(Entity Constraint, 기본키 무결성 제약 조건, Primary Key Constraint)
  > 제약 대상: 튜플<br>
  > 해당 키: 기본키<br>
  > NULL값 불가<br>
  > 릴레이션 내 제약 조건 개수 = 1개
- 참조 무결성 제약 조건(외래키 무결성 제약 조건, Foreign Key Constraint)
  > 제약 대상: 애트리뷰트, 튜플
  > 해당 키: 외래키
  > NULL값 허용
  > 릴레이션 내 제약 조건의 개수 = 0 ~ n개
